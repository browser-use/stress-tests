<!DOCTYPE html>
<html lang="en" ng-app="angularJsFormApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AngularJS (v1) Form</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css">

    <!-- AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>

    <!-- UI Bootstrap (for Datepicker) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/2.5.6/ui-bootstrap-tpls.min.js"></script>

    <!-- Custom CSS -->
    <style>
        body {
            padding: 20px;
        }

        .form-section {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 30px;
            border: 1px solid #ddd;
        }

        .radio-group {
            margin-bottom: 15px;
        }

        .radio {
            margin: 5px 0;
        }
    </style>
</head>
<body ng-controller="FormController as formCtrl">
    <div class="container">
        <h1>AngularJS (v1) Form</h1>

        <div class="alert alert-info" ng-if="formCtrl.messageSent">
            <strong>Success!</strong> Form submitted successfully! The secret is: dumbledore
        </div>

        <form name="userForm" ng-submit="formCtrl.submitForm(userForm.$valid)" novalidate>
            <div class="form-section">
                <!-- Text Field -->
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" class="form-control" id="email" name="email"
                           ng-model="formCtrl.user.email">
                </div>

                <!-- Dropdown 1 -->
                <div class="form-group">
                    <label for="country">Country</label>
                    <select class="form-control" id="country" name="country" ng-model="formCtrl.user.country">
                        <option value="">Select Country</option>
                        <option ng-repeat="country in formCtrl.countries" value="{{country}}">
                            {{country}}
                        </option>
                    </select>
                </div>

                <!-- Dropdown 2 -->
                <div class="form-group">
                    <label for="favoriteColor">Favorite Color</label>
                    <select class="form-control" id="favoriteColor" name="favoriteColor" ng-model="formCtrl.user.favoriteColor">
                        <option value="">Select Color</option>
                        <option ng-repeat="color in formCtrl.colors" value="{{color.value}}">
                            {{color.name}}
                        </option>
                    </select>
                </div>

                <!-- Date Picker -->
                <div class="form-group">
                    <label for="birthDate">Date of Birth</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="birthDate" name="birthDate"
                               ng-model="formCtrl.user.birthDate"
                               uib-datepicker-popup="MM/dd/yyyy"
                               is-open="formCtrl.birthDateOpened">
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default" ng-click="formCtrl.openDatepicker($event)">
                                <i class="glyphicon glyphicon-calendar"></i>
                            </button>
                        </span>
                    </div>
                </div>

                <!-- Radio Button Group -->
                <div class="form-group radio-group">
                    <label>Preferred Contact Method:</label>
                    <div class="radio" ng-repeat="option in formCtrl.contactMethods">
                        <label>
                            <input type="radio" name="contactMethod" ng-model="formCtrl.user.contactMethod" value="{{option.value}}">
                            {{option.label}}
                        </label>
                    </div>
                </div>

                <!-- File Upload -->
                <div class="form-group">
                    <label for="fileUpload">Upload File</label>
                    <input type="file" class="form-control" id="fileUpload" name="fileUpload"
                           onchange="angular.element(this).scope().formCtrl.handleFileSelect(this)">
                </div>

                <!-- Submit Button -->
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Submit Form</button>
                </div>
            </div>
        </form>
    </div>

    <!-- App Script -->
    <script>
        (function() {
            'use strict';

            angular
                .module('angularJsFormApp', ['ui.bootstrap'])
                .controller('FormController', FormController);

            function FormController($scope) {
                var vm = this;

                // Initialize the user object
                vm.user = {
                    email: '',
                    country: '',
                    favoriteColor: '',
                    birthDate: null,
                    contactMethod: 'email',
                    file: null
                };

                // Form state
                vm.birthDateOpened = false;
                vm.messageSent = false;

                // Form options
                vm.countries = [
                    'United States',
                    'Canada',
                    'United Kingdom',
                    'Australia',
                    'Germany',
                    'France'
                ];

                vm.colors = [
                    { name: 'Red', value: 'red' },
                    { name: 'Blue', value: 'blue' },
                    { name: 'Green', value: 'green' },
                    { name: 'Yellow', value: 'yellow' },
                    { name: 'Purple', value: 'purple' }
                ];

                vm.contactMethods = [
                    { label: 'Email', value: 'email' },
                    { label: 'Phone', value: 'phone' },
                    { label: 'Mail', value: 'mail' }
                ];

                // Methods
                vm.submitForm = submitForm;
                vm.openDatepicker = openDatepicker;
                vm.handleFileSelect = handleFileSelect;

                function submitForm(isValid) {
                    console.log('Form submitted!', vm.user);
                    vm.messageSent = true;

                    // Hide the success message after 3 seconds
                    setTimeout(function() {
                        $scope.$apply(function() {
                            vm.messageSent = false;
                        });
                    }, 3000);
                }

                function openDatepicker($event) {
                    $event.preventDefault();
                    $event.stopPropagation();
                    vm.birthDateOpened = true;
                }

                function handleFileSelect(input) {
                    if (input.files && input.files[0]) {
                        vm.user.file = input.files[0];
                        $scope.$apply();
                        console.log('File selected:', input.files[0].name);
                    }
                }
            }
        })();
    </script>
</body>
</html>